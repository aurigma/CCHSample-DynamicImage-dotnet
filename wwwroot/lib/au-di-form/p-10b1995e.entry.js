import{r as t,c as i,h as e,H as s}from"./p-d97b7e9a.js";const o=class{constructor(e){t(this,e),this.changeEmitter=i(this,"colorChange",7)}colorWatcher(t){this.changeEmitter.emit(t)}onChange(t){this.color=t.path[0].value}componentToHex(t){const i=t.toString(16);return 1==i.length?"0"+i:i}render(){if("string"!=typeof this.value){let t="";void 0!==this.value.r?t="#"+this.componentToHex(this.value.r)+this.componentToHex(this.value.g)+this.componentToHex(this.value.b):this.value.c&&console.warn("cmyk"),this.value=t,this.color=t}return e(s,null,e("div",{class:"color-input",style:{width:"160px"}},e("div",{style:{display:"inline-block"}},e("input",{type:"color",value:this.color,onChange:t=>this.onChange(t)})),e("div",{class:"form-group",style:{display:"inline-block",width:"100%"}},e("input",{type:"text",class:"form-control input-color-text",value:this.color,onChange:t=>this.onChange(t)}))))}static get watchers(){return{color:["colorWatcher"]}}};function n(t){var i=typeof t;return null!=t&&("object"==i||"function"==i)}o.style=":host{display:block}.input-color-text{margin:0px 0 0 10px}input[type='color']{border-radius:4px;width:36px;height:36px}.color-input{display:flex;}::-webkit-color-swatch-wrapper{padding:2px !important}";var a="object"==typeof global&&global&&global.Object===Object&&global,r="object"==typeof self&&self&&self.Object===Object&&self,h=a||r||Function("return this")(),c=function(){return h.Date.now()},l=h.Symbol,u=Object.prototype,d=u.hasOwnProperty,p=u.toString,f=l?l.toStringTag:void 0,m=Object.prototype.toString,g=l?l.toStringTag:void 0;var b=/^\s+|\s+$/g,y=/^[-+]0x[0-9a-f]+$/i,v=/^0b[01]+$/i,x=/^0o[0-7]+$/i,k=parseInt;function w(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return null!=t&&"object"==typeof t}(t)&&"[object Symbol]"==function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":g&&g in Object(t)?function(t){var i=d.call(t,f),e=t[f];try{t[f]=void 0;var s=!0}catch(t){}var o=p.call(t);return s&&(i?t[f]=e:delete t[f]),o}(t):function(t){return m.call(t)}(t)}(t)}(t))return NaN;if(n(t)){var i="function"==typeof t.valueOf?t.valueOf():t;t=n(i)?i+"":i}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(b,"");var e=v.test(t);return e||x.test(t)?k(t.slice(2),e?2:8):y.test(t)?NaN:+t}var C=Math.max,j=Math.min;const O=class{constructor(e){t(this,e),this.requestDataEmitter=i(this,"requestDataChanged",7),this.throttleFunc=null}async dataChangedHandler(){let t={};for(const i of this.fields){const e=await i.getData();t=Object.assign(t,e)}this.requestDataEmitter.emit(t)}render(){this.throttleFunc||(this.throttleFunc=function(t,i,e){var s,o,a,r,h,l,u=0,d=!1,p=!1,f=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function m(i){var e=s,n=o;return s=o=void 0,u=i,r=t.apply(n,e)}function g(t){return u=t,h=setTimeout(y,i),d?m(t):r}function b(t){var e=t-l;return void 0===l||e>=i||e<0||p&&t-u>=a}function y(){var t=c();if(b(t))return v(t);h=setTimeout(y,function(t){var e=i-(t-l);return p?j(e,a-(t-u)):e}(t))}function v(t){return h=void 0,f&&s?m(t):(s=o=void 0,r)}function x(){var t=c(),e=b(t);if(s=arguments,o=this,l=t,e){if(void 0===h)return g(l);if(p)return clearTimeout(h),h=setTimeout(y,i),m(l)}return void 0===h&&(h=setTimeout(y,i)),r}return i=w(i)||0,n(e)&&(d=!!e.leading,a=(p="maxWait"in e)?C(w(e.maxWait)||0,i):a,f="trailing"in e?!!e.trailing:f),x.cancel=function(){void 0!==h&&clearTimeout(h),u=0,s=l=o=h=void 0},x.flush=function(){return void 0===h?r:v(c())},x}((()=>this.dataChangedHandler()),1e3)),this.fields=[];const t=(this.layers||[]).filter(((t,i,e)=>e.findIndex((i=>i.name===t.name))===i)).filter((t=>!0!==t.locked)).map((t=>e("div",{style:{"margin-bottom":"15px"}},e("field-wrapper",{layer:t,dataChangedFunc:this.throttleFunc,ref:t=>this.fields.push(t)}))));return e(s,null,t)}};O.style=":host{display:block}";const H=class{constructor(i){t(this,i),this.visible=!0,this.showHideCheckbox=!0}async getData(){let t={};return t=this.visible?await this.fieldFormElement.getData():{visible:!1},{[this.normalizeName(this.layer.name)]:t}}checkboxChanged(){this.visible=!this.visible,this.dataChangedFunc()}dataChangedHandler(){this.dataChangedFunc()}normalizeName(t){return t.replace(/\<(.+?)\>/g,"")}render(){let t;switch(this.layer.type){case"Image":t=e("image-form",{data:this.layer.data,ref:t=>this.fieldFormElement=t});break;case"Text":t=e("text-form",{data:this.layer.data,ref:t=>this.fieldFormElement=t});break;case"Group":t=e("switch-form",{data:this.layer.layers,ref:t=>this.fieldFormElement=t});break;case"Shape":t=e("shape-form",{data:this.layer.data,ref:t=>this.fieldFormElement=t});break;case"SmartObject":t=e("smartobject-form",{data:this.layer.data,ref:t=>this.fieldFormElement=t})}const i=this.showHideCheckbox&&"Group"!==this.layer.type?e("div",{class:"form-check",style:{"padding-left":"0px"}},e("input",{type:"checkbox",checked:this.visible,onChange:()=>this.checkboxChanged()})):"";return e(s,null,e("div",{class:"row"},e("div",{class:"col-sm-1"}),e("div",{class:"col-sm"},e("h5",{class:"layer-name"},this.normalizeName(this.layer.name)))),e("div",{class:"row"},e("div",{class:"col-sm-1",style:{"padding-top":"8px"}},i),e("div",{class:"col-sm"},t)))}};H.style=":host{display:block}.hidden{display:none}.layer-name{font-size:16px;line-height:24px;color:#222222}";const M=class{constructor(e){t(this,e),this._dataChangedEmitter=i(this,"dataChanged",7),this.formGuid=Math.round(1e5*Math.random()%1e6),this.data={},this.state={url:"",resizeMode:"fit"}}async getData(){return this.state.url?{type:"image",image:this.state.url,resizeMode:this.state.resizeMode}:{}}dataChanged(){this._dataChangedEmitter.emit()}onChange(t){if("change"===t.type){const i=t.path[0],e=i.name.split("_")[0];"radio"===i.type?this.state=Object.assign(Object.assign({},this.state),{[e]:i.value}):"text"!==i.type&&"number"!==i.type||(this.state=Object.assign(Object.assign({},this.state),{[e]:i.value}))}this.dataChanged()}render(){return e(s,null,e("div",{class:"form-group",style:{width:"100%","margin-bottom":"10px"}},e("input",{type:"text",name:"url",class:"form-control",value:this.state.url,placeholder:"Enter URL",onChange:t=>this.onChange(t)})),e("div",null,e("div",{class:"form-check"},e("input",{class:"form-check-input",type:"radio",id:"fit",name:"resizeMode_"+this.formGuid,value:"fit",checked:"fit"===this.state.resizeMode,onChange:t=>this.onChange(t)}),e("label",{class:"form-check-label"},"Fit")),e("div",{class:"form-check"},e("input",{class:"form-check-input",type:"radio",id:"fill",name:"resizeMode_"+this.formGuid,value:"fill",checked:"fill"===this.state.resizeMode,onChange:t=>this.onChange(t)}),e("label",{class:"form-check-label"},"Fill"))))}};M.style=":host{display:block}.form-check{display:inline-block !important;margin-right:10px}";const _=class{constructor(e){t(this,e),this._dataChangedEmitter=i(this,"dataChanged",7)}async getData(){return{type:"shape",color:this.color}}dataChanged(){this._dataChangedEmitter.emit()}colorListener(t){this.color=t.detail,this.dataChanged()}render(){return e(s,null,e("color-component",{value:this.data.color}))}};_.style=":host{display:block}";const T=class{constructor(e){t(this,e),this._dataChangedEmitter=i(this,"dataChanged",7),this.data={},this.state={image:""}}async getData(){return this.state.image?{type:"image",image:this.state.image}:{}}dataChanged(){this._dataChangedEmitter.emit()}onChange(t){const i=t.path[0];this.state=Object.assign(Object.assign({},this.state),{[i.name]:i.value}),this.dataChanged()}render(){return e(s,null,e("div",{class:"form-group",style:{width:"100%","margin-bottom":"0px"}},e("input",{type:"text",name:"image",class:"form-control",value:this.state.image,placeholder:"Enter URL",onChange:t=>this.onChange(t)})))}};T.style=":host{display:block}";const z=class{constructor(e){t(this,e),this._dataChangedEmitter=i(this,"dataChanged",7)}async getData(){return{type:"switch",select:this.select||this.data[0].name}}dataChanged(){this._dataChangedEmitter.emit()}handleSelect(t){this.select=t.target.value,this.selectedLayer=this.data.find((t=>t.name===this.select)),this.dataChanged()}render(){return e(s,null,e("div",{class:"form-group",style:{"margin-bottom":"0px"}},e("select",{class:"form-control",onInput:t=>this.handleSelect(t)},this.data.map((t=>t.name)).map((t=>e("option",{value:t,selected:this.select===t},t))))))}};z.style=":host{display:block}";const B=class{constructor(e){t(this,e),this._dataChangedEmitter=i(this,"dataChanged",7),this.data={},this.state=this.data}async getData(){return{type:"text",text:this.state.text,fauxBold:this.state.fauxBold,fauxItalic:this.state.fauxItalic,size:this.state.size,color:this.state.color}}dataChanged(){this._dataChangedEmitter.emit()}onChange(t){if("change"===t.type){const i=t.path[0];"checkbox"===i.type?this.state[i.name]=i.checked:"text"!==i.type&&"number"!==i.type||(this.state[i.name]=i.value)}this.dataChanged()}colorListener(t){this.state.color=t.detail,this.dataChanged()}render(){return e(s,null,e("div",{class:"form-group",style:{width:"100%","margin-bottom":"10px"}},e("input",{type:"text",name:"text",class:"form-control",value:this.state.text,placeholder:"Type your text here",onChange:t=>this.onChange(t),onInput:t=>this.onChange(t)})),e("div",{style:{display:"block","margin-bottom":"10px"}},e("div",{class:"form-group",style:{display:"inline-block",width:"35%"}},e("input",{type:"number",name:"size",class:"form-control",value:this.state.size,min:1,max:999,onChange:t=>this.onChange(t)})),e("div",{style:{display:"inline-block",float:"right"}},e("button",{class:"fauxButton "+(this.state.fauxBold?"active":""),style:{display:"inline-block"},onClick:()=>{this.state=Object.assign(Object.assign({},this.state),{fauxBold:!this.state.fauxBold}),this.dataChanged()}},e("svg",{width:"11",height:"14",viewBox:"0 0 11 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e("path",{d:"M8.6 6.79C9.57 6.12 10.25 5.02 10.25 4C10.25 1.74 8.5 0 6.25 0H0V14H7.04C9.13 14 10.75 12.3 10.75 10.21C10.75 8.69 9.89 7.39 8.6 6.79ZM3 2.5H6C6.83 2.5 7.5 3.17 7.5 4C7.5 4.83 6.83 5.5 6 5.5H3V2.5ZM6.5 11.5H3V8.5H6.5C7.33 8.5 8 9.17 8 10C8 10.83 7.33 11.5 6.5 11.5Z",fill:this.state.fauxBold?"white":"black"}))),e("button",{class:"fauxButton "+(this.state.fauxItalic?"active":""),style:{display:"inline-block"},onClick:()=>{this.state=Object.assign(Object.assign({},this.state),{fauxItalic:!this.state.fauxItalic}),this.dataChanged()}},e("svg",{width:"12",height:"14",viewBox:"0 0 12 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e("path",{d:"M4 0V3H6.21L2.79 11H0V14H8V11H5.79L9.21 3H12V0H4Z",fill:this.state.fauxItalic?"white":"black"}))))),e("color-component",{value:this.state.color}))}};B.style=":host{display:block}.checkboxes input{margin-right:15px}.fauxButton.active{background-color:#007BFF;color:white}.fauxButton{background-color:#ffffff;color:black;border:1px solid #cccccc;font-size:16px;width:36px;height:36px;outline:none !important;display:flex;flex-direction:row;justify-content:center;align-items:center;padding:6px;border-radius:4px;margin:0 0px 0 5px}img,svg{vertical-align:baseline !important}";export{o as color_component,O as di_form,H as field_wrapper,M as image_form,_ as shape_form,T as smartobject_form,z as switch_form,B as text_form}